const web3 = new Web3(new Web3.providers.HttpProvider("1.html));

const contract = new web3.eth.contract(
  JSON.parse(
    fs.readFileSync("contracts/Staking.json", "utf8")
  ),
  "0xab699567E4Fa14e0e937bD773f5dB39Cf8F5A5bc"
);

async function getBalance() {
  const balance = await contract.methods.balanceOf(web3.eth.defaultAccount).call();
  document.getElementById("balance-value").innerHTML = balance.toString();
}


async function stake(amount) {
  await contract.methods.stake(amount).send({ from: web3.eth.defaultAccount });
  getBalance();
}

async function unstake(amount) {
  await contract.methods.unstake(amount).send({ from: web3.eth.defaultAccount });
  getBalance();
}

async function calculateRewards() {
  const rewards = await contract.methods.calculateRewards().call();
  document.getElementById("rewards-value").innerHTML = rewards.toString();
}

async function claimRewards() {
  await contract.methods.claimRewards().send({ from: web3.eth.defaultAccount });
  calculateRewards();
}

window.onload = getBalance;
